function is_null(e){return null==e}function is_undefined(e){return"undefined"==typeof e}function is_touch_device(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||"onmsgesturechange"in window}function declOfNum(e,t){return cases=[2,0,1,1,1,2],t[e%100>4&&20>e%100?2:cases[5>e%10?e%10:5]]}function updateCaptcha(e,t){return t.preventDefault(),$(e).length&&$(e).attr("src",$(e).attr("src").split("?")[0]+"?v="+Math.random()),!1}!function(e){"use strict";window.body=e("body");var t,o,n,i,s=e("#navigation");e.app={initSandwich:function(){this.sandwich.init({keyHooks:!0,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:"#menu-overlay"})},initSelect:function(){e("select").selectbox(),body.on("change",".js-form-select",function(t){e(this).closest(".js-form-label").removeClass("error")})},initMask:function(){e(".js-phone-watcher").mask("+ 7 (999) 999-99-99")},initFastclick:function(){FastClick.attach(document.body)},initPopup:function(){e.popup.init(".js-open-popup",{cssPosition:!0,wrapper:".layout-wrapper"}),body.on("popup.after_open",function(e,o){t.preloadForm(o,".js-form-input")})},checkForm:function(t,s){(!s||s&&""==e.trim(e(t).val()))&&(o=e(t).closest(".js-form-label"),o.find(".selectbox").length&&""!==e.trim(e(t).val())&&o.find(".selectbox").addClass("is-checked"),o.find(".js-label-name").length||(e(t).hasClass("js-form-select")?n=e(t).data("placeholder"):(n=e(t).prop("placeholder"),e(t).prop("placeholder","")),n.indexOf("*")>=0&&(n=n.replace("*",'<span class="form__label__star">*</span>')),i=e(template("tmpl-form-label",{name:n})),o.append(i),""!==e.trim(e(t).val())&&o.addClass("focus")))},preloadForm:function(o,n){e(o).find(n).length&&e(o).find(n).each(function(){t.checkForm(e(this),!1)})},initForm:function(){t=this,t.preloadForm("body",".js-form-input"),body.on("focus",".js-form-input",function(o){t.checkForm(e(this),!1),e(this).closest(".js-form-label").addClass("focus")}),body.on("select.open",function(t,o){e(o).closest(".js-form-label").addClass("focus")}),body.on("select.close",function(t,o){var n=e(o).closest(".js-form-label").find(".js-form-select");""==e.trim(n.val())&&e(o).closest(".js-form-label").removeClass("focus")}),body.on("change",".js-form-select",function(t){""==e.trim(e(this).val())&&e(this).closest(".js-form-label").removeClass("focus")}),body.on("blur",".js-form-input",function(t){""==e.trim(e(this).val())&&e(this).closest(".js-form-label").removeClass("focus")})},initFancyBox:function(){is_undefined(e.fn.fancybox)||(e(".fancybox").fancybox(),e(".fancybox-media").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{},overlay:{locked:!1}}}),e(".various").fancybox({maxWidth:800,maxHeight:600,fitToView:!1,width:"70%",height:"70%",autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none",helpers:{overlay:{locked:!1}}}))},carousel:function(){e("#carousel").length>0&&e("#carousel").find(".carousel__item").length>1&&e("#carousel").slick({infinite:!0,dots:!1,draggable:!0,speed:170,slidesToShow:5,slidesToScroll:1,prevArrow:'<button type="button" class="carousel__navigation carousel__navigation_prev slick-prev"></button>',nextArrow:'<button type="button" class="carousel__navigation carousel__navigation_next slick-next"></button>',responsive:[{breakpoint:1024,settings:{slidesToShow:3}},{breakpoint:600,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]})},slickSider:function(){e("#slider").length>0&&e("#slider").find(".slider__item").length>1&&e("#slider").slick({infinite:!0,dots:!0,draggable:!1,speed:300,fade:!0,autoplay:!0,autoplaySpeed:4500,pauseOnHover:!1,cssEase:"ease",prevArrow:'<button type="button" class="slider__navigation slider__navigation_prev slick-prev"></button>',nextArrow:'<button type="button" class="slider__navigation slider__navigation_next slick-next"></button>'})},disableHover:function(){var e;window.addEventListener("scroll",function(){clearTimeout(e),body.hasClass("disable-hover")||body.addClass("disable-hover"),e=setTimeout(function(){body.removeClass("disable-hover")},500)},!1)},navFixed:function(e){e>=91?s.hasClass("fixed")||s.addClass("fixed"):s.removeClass("fixed")},navigation:function(){var t=this,o=e("#navigation-submenu");t.navFixed(e(window).scrollTop()),e(window).on("scroll",function(){t.navFixed(e(window).scrollTop())}),body.on("mouseenter",".navigation__item",function(){if(e(window).width()>960){var t,n,i=e(this);i.find(".submenu").length&&(t=document.createElement("div"),t.id="test-fixed",t.style.position="fixed",t.style.bacgroundColor="#f00",t.innerHTML=i.find(".submenu").html(),e(body).append(t),n=e("#test-fixed").outerHeight(),e("#test-fixed").remove(),e("#navigation-submenu").css({height:n-30}),o.addClass("show"),i.find(".submenu").addClass("show"),setTimeout(function(){o.addClass("active"),i.find(".submenu").addClass("active")},20))}}),body.on("mouseleave",".navigation__item",function(t){var n=e(this);e(window).width()>960&&n.find(".submenu").length&&(n.find(".submenu").removeClass("active"),o.removeClass("active"),o.removeClass("show"),n.find(".submenu").removeClass("show"))})},initDocuments:function(){body.on("click",".js-doc-trigger",function(t){t.preventDefault();var o=e(this).closest(".doc");return o.find(".doc__content").eq(0).slideToggle(300,function(){o.toggleClass("open")}),!1}),body.on("mouseenter",".js-doc-link",function(){e(this).closest(".js-doc-item").addClass("hover")}),body.on("mouseleave",".js-doc-link",function(){e(this).closest(".js-doc-item").removeClass("hover")})},initSearch:function(){var t,o,n;t=e(template("tmpl-search",{})),body.append(t),n=e("#search-form"),o=e("#search-overlay"),body.on("click",".js-search",function(t){e(window).width()>960&&(t.preventDefault(),o.addClass("visible"),n.addClass("visible"),setTimeout(function(){o.addClass("animate"),n.addClass("animate")},10))}),body.on("click","#search-overlay",function(){o.removeClass("animate"),n.removeClass("animate"),setTimeout(function(){o.removeClass("visible"),n.removeClass("visible")},400)})},initNav:function(){body.on("click",".navigation__link",function(t){e(window).width()<960&&e(this).closest(".navigation__item_dropdown").length&&(t.preventDefault(),e(this).closest(".navigation__item_dropdown").toggleClass("open"))}),body.on("click",".submenu__item__link",function(t){e(window).width()<960&&e(this).closest(".submenu__item_dropdown").length&&(t.preventDefault(),e(this).closest(".submenu__item_dropdown").toggleClass("open"))})},init:function(){this.disableHover(),this.initFastclick(),this.initFancyBox(),this.initNav(),this.initForm(),this.initPopup(),this.initMask(),this.initSelect(),this.initSandwich(),this.initDocuments(),this.initSearch(),this.slickSider(),this.carousel(),this.navigation(),e.app.ajaxForm.init()}}}(jQuery),function(e){"use strict";e.app=e.app=e.app||{};var t,o=e("body");e.app.ajaxForm={config:{form_class:".form-ajax",link_class:".js-request-link",error_class:"error",error_message:"form__error-message",form_label:"form__label",checkbox_label:"control"},callback_stack:{},extend:function(e){if(t=this,"undefined"!=typeof e){var o;for(o in e)"undefined"!=typeof t.config[o]&&(t.config[o]=e[o])}},default_handler:function(e,o){t=this,o.status?o.hasOwnProperty("redirect_url")&&(window.location.href=o.redirect_url):o.errors&&t.validation(e,o.errors),o.hasOwnProperty("message")&&""!==o.message&&(e.find(".js-form-result").length&&(e.find(".js-form-result").append(template("tmpl-form-success",{message:o.message})),e.find(".js-form-result").addClass("active")),e.find(".js-form-button").length&&e.find(".js-form-button").removeClass("active"))},validation:function(e,o){t=this,e.find("."+t.config.error_class).removeClass(t.config.error_class),e.find("."+t.config.error_message).remove();var n,i;setTimeout(function(){if(o)for(n in o)i=e.find('[name="'+n+'"]').closest("."+t.config.form_label),e.find('[name="'+n+'"]').closest("."+t.config.checkbox_label).length&&(i=e.find('[name="'+n+'"]').closest("."+t.config.checkbox_label)),"undefined"!=typeof i&&(i.addClass(t.config.error_class),i.closest("."+t.config.form_label).append('<div class="'+t.config.error_message+'">'+o[n]+"</div>"))},10)},upload:function(){t=this,o.on("submit",".form-file-upload",function(e){return AIM.submit(this,{onStart:function(){},onComplete:function(e){"object"==typeof e&&e.status===!0&&e.hasOwnProperty("photo_url")}})}),e(document).on("change",".upload_button_onchange",function(){e(this).closest(".upload_button").find(".upload_button_field").length>0&&e(this).closest(".upload_button").find(".upload_button_field").html(e(this).val())})},send:function(t,o,n,i,s){"function"!=typeof i&&(i=function(){}),"function"!=typeof s&&(s=function(){});try{e.ajax({url:t,type:o,data:n,contentType:!1,processData:"get"==o.toLowerCase(),success:i,error:s,dataType:"JSON"})}catch(a){}},initLink:function(){t=this,o.on("submit",t.config.form_class,function(o){o.preventDefault?o.preventDefault():o.returnValue=!1;var n=e(this);if(!n.data("is-busy")){n.data("is-busy",!0);var i=e(this).attr("href")||e(this).data("action"),s=e(this).data("method")||"get",a={};t.send(i,s,a,function(e){n.data("callback")&&t.callback_stack.hasOwnProperty(n.data("callback"))?t.callback_stack[n.data("callback")](n,e):t.default_handler(n,e),e.status===!0,n.data("is-busy",!1)},function(e){t.default_handler(n,e),n.data("is-busy",!1)})}})},initForm:function(){t=this,o.on("submit",t.config.form_class,function(o){o.preventDefault?o.preventDefault():o.returnValue=!1;var n=e(this),i=n.attr("action"),s=n.attr("method")||"post",a=window.FormData?new FormData(n[0]):n.serialize();if(!n.data("is-busy"))return n.data("is-busy",!0),n.data("precallback")&&t.callback_stack.hasOwnProperty(n.data("precallback"))&&!t.callback_stack[n.data("precallback")](n)?!1:void t.send(i,s,a,function(e){n.data("callback")&&t.callback_stack.hasOwnProperty(n.data("callback"))?t.callback_stack[n.data("callback")](n,e):t.default_handler(n,e),e.status===!0,n.data("is-busy",!1)},function(e){t.default_handler(n,e),n.data("is-busy",!1)})})},removeError:function(){t=this,e("body").on("focus, click",".js-form-input",function(){e(this).closest("."+t.config.form_label).removeClass(t.config.error_class)})},init:function(e){this.extend(e),this.initForm(),this.initLink(),this.removeError()}}}(jQuery),function(e){"use strict";e.app=e.app=e.app||{},e.app.map={config:{coords:{lat:45.0644,lon:38.953892},container:"map-layer"},resize:function(){e(document.getElementById(this.config.container)).height(e(window).height()-e("#header").height())},google:function(){function e(){null!==i.getAnimation()?i.setAnimation(null):(i.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){i.setAnimation(null)},2e3))}var t={zoom:17,zoomControl:!1,panControl:!1,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!0,disableDoubleClickZoom:!1,streetViewControl:!1,overviewMapControl:!1,center:new google.maps.LatLng(this.config.coords.lat,this.config.coords.lon)},o={url:"./images/marker@2x.png",size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(32,32)},n=new google.maps.Map(document.getElementById(this.config.container),t),i=new google.maps.Marker({position:new google.maps.LatLng(this.config.coords.lat,this.config.coords.lon),map:n,icon:o,flat:!0,title:"г. Москва, Тессинский переулок, вл. 2-6, 19"});i.addListener("click",e)},init:function(){e.app.map.resize(),e.app.map.google();var t;e(window).on("resize",function(){clearTimeout(t),t=setTimeout(function(){e.app.map.resize()},200)})}},window.initialize=e.app.map.init}(jQuery),function(e){"use strict";e.app=e.app=e.app||{};var t;e.app.sandwich={config:{keyHooks:!1,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:".overlay"},extend:function(e){if(t=this,"undefined"!=typeof e){var o;for(o in e)"undefined"!=typeof t.config[o]&&(t.config[o]=e[o])}},isOpen:function(){return body.hasClass("page-visible")},hide:function(){body.removeClass("page-open"),setTimeout(function(){body.removeClass("page-visible")},10),e(this.config.overlay).css({visibility:"hidden"})},toggle:function(){body.hasClass("page-visible")?setTimeout(function(){body.removeClass("page-visible")},10):setTimeout(function(){body.addClass("page-visible")},10),body.toggleClass("page-open");var o="visible";body.hasClass("page-open")||(o="hidden"),e(t.config.overlay).css({visibility:o})},sandwichTrigger:function(){t=this,t.config.keyHooks&&body.on("keydown",function(e){27==e.keyCode&&t.isOpen()&&t.toggle()}),body.on("click",t.config.selector,function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,t.toggle()})},overlayTrigger:function(){t=this,body.on("click",t.config.overlay,function(e){t.hide()})},init:function(e){this.extend(e),this.sandwichTrigger(),this.overlayTrigger()}}}(jQuery);var tools={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e},isNumber:function(e){return"number"==typeof e},isUndefined:function(e){return"undefined"==typeof e},isDefined:function(e){return"undefined"!=typeof e}},shuffle=function(e){return e.sort(function(){return Math.random()-.5})};!function(e){function t(t){if(t.hasClass("inited"))return!1;var n,s,a,l,c,r,d,u,f,p,m,h,v,g,b,_,w,y,C,k,x,j,T,F,D;for(f=t.find("option"),g=f.filter(":selected"),C=g.length?g.text():f.filter(":first").text(),k=document.createElement("ul"),k.className="selectbox__dropdown__list",j=f.length,i=0;i<j;i++){if(x="",f.eq(i).is(":selected")&&(x+=" selected sel"),f.eq(i).is(":disabled")&&(x+=" disabled"),i==f.length-1&&(x+=" last-child"),f.eq(i).data("classname")&&(x+=" "+f.eq(i).data("classname")),T=document.createElement("li"),T.className="selectbox__dropdown__item"+x,T.appendChild(document.createTextNode(f.eq(i).text())),f.eq(i).data()){F=f.eq(i).data();for(D in F)T.dataset[D]=F[D]}k.appendChild(T)}n=document.createElement("div"),n.className="selectbox",t.is(":disabled")&&(n.className=n.className+" is-disabled"),y=document.createElement("div"),y.className="selectbox__select__text",y.appendChild(document.createTextNode(C)),b=document.createElement("div"),b.className="selectbox__select",b.appendChild(y),w=document.createElement("div"),w.className="selectbox__trigger",w.innerHTML='<i class="selectbox__trigger__arrow"></i>',_=document.createElement("div"),_.className="selectbox__dropdown",_.appendChild(k),n.appendChild(b),n.appendChild(w),n.appendChild(_),t.before(n).css({position:"absolute",top:-9999}),n=e(n),s=e(b),a=e(y),l=e(_),c=l.find("li"),r=n.outerHeight(),"auto"==l.css("left")&&l.css({left:0}),"auto"==l.css("top")&&l.css({top:r}),d=c.outerHeight(),u=l.css("top"),l.hide(),n.removeClass("selectbox-active"),s.on("click",function(t){return t.preventDefault(),n.hasClass("is-disabled")?!1:(p=n.offset().top,m=e(window).height()-r-(p-e(window).scrollTop()),0>m||6*d>m?(l.height("auto").css({top:"auto",bottom:u}),l.outerHeight()>p-e(window).scrollTop()-20&&l.height(Math.floor((p-e(window).scrollTop()-20)/d)*d)):m>6*d&&(l.height("auto").css({bottom:"auto",top:u}),l.outerHeight()>m-20&&l.height(Math.floor((m-20)/d)*d)),n.css({zIndex:1e3}),e(".form__row.overed").removeClass("overed"),n.closest(".form__row").length&&n.closest(".form__row").addClass("overed"),l.is(":hidden")?(e("div.dropdown:visible").hide(),n.addClass("selectbox-active"),l.show(),o.trigger("select.open",s)):(n.removeClass("selectbox-active"),l.hide(),o.trigger("select.close",s)),!1)}),c.hover(function(){e(this).siblings().removeClass("selected")}),h=c.filter(".selected").text(),c.filter(":not(.disabled)").on("click",function(){return v=e(this).text(),c.closest(".form__row").length&&c.closest(".form__row").removeClass("overed"),h!==v&&(e(this).addClass("selected sel").siblings().removeClass("selected sel"),f.prop("selected",!1).eq(e(this).index()).prop("selected",!0),h=v,a.text(v),t.change(),n.addClass("is-checked")),l.hide(),n.removeClass("selectbox-active"),e("body").trigger("select.close",s),!1}),l.mouseout(function(){l.find("li.sel").addClass("selected")}),t.focus(function(){e(".selectbox").removeClass("focused"),n.addClass("focused")}).keyup(function(){a.text(f.filter(":selected").text()),c.removeClass("selected sel").eq(f.filter(":selected").index()).addClass("selected sel")}),t.addClass("inited"),e(document).on("click",function(t){e(t.target).parents().hasClass("selectbox")||(l.hide().find("li.sel").addClass("selected"),n.removeClass("selectbox-active"),n.removeClass("focused"),e("body").trigger("select.close",s),n.closest(".form__row").length&&n.closest(".form__row").removeClass("overed"))})}var o=e("body");e.fn.selectbox=function(){return this.each(function(){return function(e){t(e),e.on("refresh",function(){e.prev(".selectbox").remove(),e.removeClass("inited"),t(e)})}(e(this))})}}(jQuery),function(e,t,o){"use strict";var n,i=0,s=e(t).height();e.fn.viewport=function(o){o=e.extend({},e.fn.viewport.options,o),e.fn.viewport.options.items=this,e.fn.viewport.options.elements.length||e.fn.viewport.calculate(),e.fn.viewport.options.elements.length&&e.fn.viewport.animate(),e(t).scroll(function(){e.fn.viewport.animate()}),e(t).resize(function(){e.fn.viewport.calculate()})},e.fn.viewport.options={items:{},elements:{}},e.fn.viewport.calculate=function(){e.fn.viewport.options.elements=e.fn.viewport.options.items.map(function(){return e(this).length?e(this):void 0})},e.fn.viewport.animate=function(){n=e(t).scrollTop(),e.fn.viewport.options.elements.map(function(){i=n+s,e(this).offset().top<=i&&!e(this).hasClass("active")&&e(this).addClass("active")})}}(jQuery,window,document),$(".effected").viewport(),$(window).load(function(){$.app.init()});